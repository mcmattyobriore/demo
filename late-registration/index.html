<!DOCTYPE html>
<html>
<head>
  <title>Late Registration</title>
  <link id="favicon" rel="icon" href="./favicon.png" />
  <style>
    body { margin: 0; background: black; }
    canvas { display: block; }
  </style>
</head>
<body>
<style>
  body { display: flex; justify-content: center; align-items: center; height: 100vh; background: #111; }

  #musicButton {
    background: none;
    border: none;
    cursor: pointer;
    padding: 0;
    transition: transform 0.2s ease;
  }

  #musicButton:hover {
    transform: scale(1.2);
  }

  #musicButton img {
    width: 64px; /* adjust size as needed */
    height: 64px;
  }
</style>

<button id="musicButton">
  <img id="musicIcon" src="./shared/images/ui/music-muted.png" alt="Music Button">
</button>

<script>
  const tracks = [
    "./shared/songs/heard-em-say.mp3",
    "./shared/songs/late.mp3",
    "./shared/songs/roses.mp3",
    "./shared/songs/touch-the-sky.mp3",
    "./shared/songs/we-major.mp3"
  ];

  let isPlaying = false;
  let currentAudio = null;

  const button = document.getElementById("musicButton");
  const icon = document.getElementById("musicIcon");

  function playRandomTrack() {
    if (!isPlaying) return;

    // pick a random track
    const randomIndex = Math.floor(Math.random() * tracks.length);
    const track = tracks[randomIndex];

    // stop current audio if any
    if (currentAudio) {
      currentAudio.pause();
      currentAudio = null;
    }

    currentAudio = new Audio(track);
    currentAudio.volume = 1;
    currentAudio.play();

    // when track ends, play a new random one
    currentAudio.onended = () => {
      playRandomTrack();
    };
  }

  button.addEventListener("click", () => {
    isPlaying = !isPlaying;

    if (isPlaying) {
      icon.src = "./shared/images/ui/music-on.png";
      playRandomTrack();
    } else {
      icon.src = "./shared/images/ui/music-muted.png";
      if (currentAudio) {
        currentAudio.pause();
        currentAudio = null;
      }
    }
  });
</script>
  
  <canvas id="funkin"></canvas>

  <!-- Inline demo data -->
<script>
  const demo = {
    objects: [
      { name: "floor-light1", image: "./shared/images/objects/floor-lights/behind.png", x: -380, y: -200, scale: 0.8, layer: 3 },
      { name: "floor-light2", image: "./shared/images/objects/floor-lights/front.png", x: -380, y: -200, scale: 0.8, layer: 3 },
      { name: "lamp-lightend", image: "./shared/images/objects/lamp/lightened.png", x: -380, y: -200, scale: 0.8, layer: 3 },
      { name: "lamp-light", image: "./shared/images/objects/lamp/light.png", x: -380, y: -200, scale: 0.8, layer: 1 },
      { name: "lamp", image: "./shared/images/objects/lamp/lamp.png", x: -380, y: -200, scale: 0.8, layer: 2 },
      { name: "background", image: "./shared/images/finalbackground.png", x: -380, y: -200, scale: 0.8, layer: 0 },
      { name: "opponent", image: "./shared/images/opponent.png", xml: "./shared/xml/opponent.xml", x: 150, y: 350, scale: 1, layer: 1 },
      { name: "player", image: "./shared/images/player.png", xml: "./shared/xml/player.xml", x: 650, y: 450, scale: 0.25, layer: 1 }
    ]
  };
</script>

  <script src="./funkin.js"></script>
</body>
</html>
